# Section 6.

### Cors란?
- Cross Origin Resource Sharing의 약자로 두 가지 이상의 다른 출처에서 자원을 공유한다는 의미이다.
  - 두가지 이상의 다른 출처란 프론트와 백을 의미한다.
- 출처란 무엇일까?: http 프로토콜, 도메인주소(url), 포트번호의 조합을 출처라고 볼 수 있다.
  - 셋중 하나라도 다르면 출처가 다르다로 할 수 있다.
- 이렇게 서로다른 출처에서 자원의 공유가 일어나면 최신 브라우저들은 모두 소통을 차단하도록 설정되어 있다.
- 그 이유는 이렇게 다른 출처에서 들어오는 요청을 차단함으로서 많은 보안적 이점을 가져갈 수 있기 때문이다.


### 그렇다면 우리는 웹을 개발할때 어떻게 해야할까?
- 1. 첫 번째 방법은 @RestController 어노테이션 밑에 @CrossOrigin이라는 어노테이션을 추가하면 된다.
  - @CrossOrigin이란 어느 출처와 소통을 할지 정의해주는 것으로
     - @CrossOrigin(origins = "http://localhost:4200") 이라고 명시해주면 해당 url과 소통이 가능하다
     - @CrossOrigin(origins = "*") 이렇게 하면 모든 도메인과 소통이 가능해진다.
     - 프론트에서 Rest Api 요청을 할 때 미리 pre-flight 라는 소통이 가능한지 물어보는 메세지를 백엔드에 보낸다. 백엔드에서 url을 확인후 소통이 가능한 url이라는 대답을 보내면 소통이 시작된다.
  - 하지만 이런 방법은 큰 프로젝트에서 설정하기에 너무 힘든 방식일 것이다.
- 2. 두 번재 방법은 SecurityFilterChain을 정의할 때 내부에 CORS 설정을 해두는 것이다.
  !(CORS 설정)[]
  - 위 사진에 나온 setAllowedOrigins에 허용하는 출처들을 전부 적을 수 있다.
  - AllowedCredentials는 인증정보들을 주고받는것을 허용한다는 의미이다.
  - AllowedHeaders 다른출처에서 오는 모든 헤더를 허용한다는 의미이다.
  - setMaxAge는 이러한 정보를 어느시간동안 저장할 것이냐를 묻는것이고 해당 시간이 지나면 캐시에 저장되게 된다.
